[{"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\index.js":"1","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\reportWebVitals.js":"2","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\App.js":"3","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Login.js":"4","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\InfoTooltip.js":"5","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Register.js":"6","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\ProtectedRoute.js":"7","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\utils\\Auth.js":"8","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\utils\\api.js":"9","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Header.js":"10","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Main.js":"11","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Footer.js":"12","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\PopupWithForm.js":"13","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\ImagePopup.js":"14","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\EditProfilePopup.js":"15","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\EditAvatarPopup.js":"16","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\AddPlacePopup.js":"17","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\contexts\\CurrentUserContext.js":"18","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Card.js":"19"},{"size":641,"mtime":1701177528732,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":1698488124251,"results":"22","hashOfConfig":"21"},{"size":7743,"mtime":1701515662038,"results":"23","hashOfConfig":"21"},{"size":1235,"mtime":1701441782805,"results":"24","hashOfConfig":"21"},{"size":488,"mtime":1701353419204,"results":"25","hashOfConfig":"21"},{"size":1534,"mtime":1701515725188,"results":"26","hashOfConfig":"21"},{"size":220,"mtime":1701247476037,"results":"27","hashOfConfig":"21"},{"size":1423,"mtime":1701417961610,"results":"28","hashOfConfig":"21"},{"size":2509,"mtime":1700395767366,"results":"29","hashOfConfig":"21"},{"size":1184,"mtime":1701420377341,"results":"30","hashOfConfig":"21"},{"size":2063,"mtime":1700397986617,"results":"31","hashOfConfig":"21"},{"size":164,"mtime":1700213552833,"results":"32","hashOfConfig":"21"},{"size":1055,"mtime":1700397977800,"results":"33","hashOfConfig":"21"},{"size":745,"mtime":1700213563843,"results":"34","hashOfConfig":"21"},{"size":2007,"mtime":1700397950688,"results":"35","hashOfConfig":"21"},{"size":1034,"mtime":1700401782459,"results":"36","hashOfConfig":"21"},{"size":1797,"mtime":1700397885743,"results":"37","hashOfConfig":"21"},{"size":86,"mtime":1700227170999,"results":"38","hashOfConfig":"21"},{"size":1494,"mtime":1701420425192,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1pzbe0u",{"filePath":"43","messages":"44","suppressedMessages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","suppressedMessages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\index.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\reportWebVitals.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\App.js",["98"],[],"import React, { useState, useEffect } from \"react\";\nimport { Route, Routes, useNavigate, Navigate} from \"react-router-dom\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login.js\";\nimport Register from \"./Register.js\";\nimport ProtectedRoute from \"./ProtectedRoute.js\";\nimport InfoTooltip from \"./InfoTooltip.js\";\nimport success from \"../images/success.svg\";\nimport error from \"../images/fail.svg\";\nimport auth from \"../utils/Auth.js\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [isTooltipErrorPopup, setIsTooltipErrorPopup] = React.useState(false);\n  const [isTooltipSuccessPopup, setIsTooltipSuccessPopup] =\n    React.useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (loggedIn) {\n    api.getUserInfo().then(setCurrentUser).catch(console.log);\n    api.getCards().then(setCards).catch(console.log);\n    }\n  }, [loggedIn]);\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleDeleteClick = () => {\n    setIsDeletePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const closeAllPopups = () => {\n    setIsDeletePopupOpen(false);\n    setIsTooltipErrorPopup(false);\n    setIsTooltipSuccessPopup(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n  };\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function handleUpdateUser(newUserData) {\n    api\n      .setUserInfo(newUserData)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n  function handleUpdateAvatar(data) {\n    api\n      .setInfoAvatar(data)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  function handleCardDelete(card, e) {\n    api\n      .deleteCardID(card._id)\n      .then(() => setCards((state) => state.filter((c) => c._id !== card._id)))\n      .catch((err) => console.log(err));\n  }\n  function handleAddPlaceSubmit(data) {\n    api\n      .addCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  const handleSignUp = (email, password) => {\n    auth\n      .registerUser(email, password)\n      .then((res) => {\n        setIsTooltipSuccessPopup(true);\n        setTimeout(() => {\n          navigate(\"/sign-in\", { replace: true });\n        }, 2000);\n      })\n      .catch(() => {\n        console.error(\"Что-то пошло не так! Попробуйте еще раз\");\n        setIsTooltipErrorPopup(true);\n      });\n  };\n  const handleSignIn = ({ email, password }) => {\n    auth\n      .authUser(email, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem(\"token\", res.token);\n          setUserEmail(email);\n          setLoggedIn(true);\n          navigate(\"/\", { replace: true });\n          return res;\n        }\n      })\n      .catch(() => {\n        console.error(\"Что-то пошло не так! Попробуйте еще раз\");\n        setIsTooltipErrorPopup(true);\n      });\n  };\n  const handleCheckToken = (jwt) => {\n    console.log(jwt);\n    auth\n      .checkToken(jwt)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          setUserEmail(res.data.email);\n          navigate(\"/\", { replace: true });\n        }\n      })\n      .catch(() => {\n        console.error(`Ошибка авторизации`);\n      });\n  };\n  React.useEffect(() => {\n    const jwt = localStorage.getItem(\"token\");\n    if (jwt) {\n      handleCheckToken(jwt);\n    }\n  }, []);\n  function handleLogout() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"token\");\n    navigate(\"/sign-in\", { replace: true });\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <Header email={userEmail} onLogout={handleLogout} />\n        <Routes>\n        <Route path='*' element={<Navigate to={loggedIn ? '/' : '/sign-in'} replace={true} />} />\n          \n          <Route\n            exact\n            path=\"/\"\n            element={\n              <ProtectedRoute\n                element={\n                  <Main\n                    onEditProfile={handleEditProfileClick}\n                    onAddPlace={handleAddPlaceClick}\n                    onEditAvatar={handleEditAvatarClick}\n                    onCardClick={handleCardClick}\n                    onDeleteClick={handleDeleteClick}\n                    onCardLike={handleCardLike}\n                    onCardDelete={handleCardDelete}\n                    cards={cards}\n                  />\n                }\n                loggedIn={loggedIn}\n              />\n            }\n          />\n          <Route\n            exact\n            path=\"/sign-up\"\n            element={<Register onRegister={handleSignUp} />}\n          />\n          <Route\n            exact\n            path=\"/sign-in\"\n            element={<Login onLogin={handleSignIn} />}\n          />\n        </Routes>\n      </div>\n\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n\n      <PopupWithForm\n        isOpen={isDeletePopupOpen}\n        onClose={closeAllPopups}\n        name=\"deleteCard\"\n        title=\"Вы уверены?\"\n        buttonText=\"Да\"\n      ></PopupWithForm>\n\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n      <InfoTooltip\n        isOpen={isTooltipSuccessPopup}\n        onClose={closeAllPopups}\n        title={\"Вы успешно зарегистрировались!\"}\n        image={success}\n      />\n      <InfoTooltip\n        isOpen={isTooltipErrorPopup}\n        name={\"login\"}\n        onClose={closeAllPopups}\n        title={\"Что-то пошло не так! Попробуйте ещё раз.\"}\n        image={error}\n      />\n      {loggedIn && <Footer />}\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Login.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\InfoTooltip.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Register.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\ProtectedRoute.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\utils\\Auth.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\utils\\api.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Header.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Main.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Footer.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\PopupWithForm.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\ImagePopup.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\EditProfilePopup.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\EditAvatarPopup.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\AddPlacePopup.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\contexts\\CurrentUserContext.js",[],[],"C:\\Users\\user\\dev\\mesto15\\frontend\\src\\components\\Card.js",[],[],{"ruleId":"99","severity":1,"message":"100","line":169,"column":6,"nodeType":"101","endLine":169,"endColumn":8,"suggestions":"102"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'handleCheckToken'. Either include it or remove the dependency array.","ArrayExpression",["103"],{"desc":"104","fix":"105"},"Update the dependencies array to be: [handleCheckToken]",{"range":"106","text":"107"},[5021,5023],"[handleCheckToken]"]